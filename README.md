# FGO_AutoScript
适用于Arm 架构Mac电脑的FGO自动刷图脚本

## 支持的操作
目前支持光炮3T刷本，可定制每一回合技能、指令卡，其他复杂操作理论上可以支持，战斗脚本可根据需求自行定制

## 实现方案
python 处理图像识别以及战斗逻辑，屏幕截取方面使用Swift调用API完成，可以根据应用名称进行截图，点击操作暂时只支持点击屏幕指定位置，无法发送鼠标事件到指定窗口

## 结构
##### MacOSScriptImpl
实现截取屏幕、发送点击事件的Xcode项目，第一次运行脚本时回对Build目录进行判断，若无所需产物回执行"xcodebuild"的shell命令
##### battle.py
实现战斗相关逻辑的文件，内部提供开始战斗的状态判断以及相关方法以及相关操作的封装类
##### resources.py
保存template目录下图片索引的文件，使用config.py自动生成，更新了template目录下文件之后使用python命令执行该文件即可
##### interfaces.py
相关接口的抽象类集合，截图、点击、战斗相关代码若需定制可以实现这里面的抽象类
##### support_impl.py
基于MacOSScriptImpl项目的实现类，内部通过shell调用相关功能
##### cv_util.py
OpenCV的简单封装，包括模板匹配以及部分图片操作的封装
##### ui_util.py
对于与游戏应用程序交互的相关对象以及函数的封装
##### config.py
负责配置的类，保存部分常量
##### common_util.py
通用功能，文件操作、打印Log等
##### main.py
主入口，内部写了部分操作的构建代码，自定义操作可以参考这里的代码来传递相关对象实例

## 兼容性
尽在自己的M1 的MacBook Air上进行了测试，未发现兼容性问题
